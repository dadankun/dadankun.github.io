/*Script by Ahmad Ramadhan //r-sights.com source contribution seacrh google, stackoverflow*/
var url_json_label = $('.url_json_label').attr('data-url'); var url_json_ch = []; $('.url_json_per_volume').each(function(a,b){url_json_ch.push($(this).attr('data-url'))}); var chk_episode_list_li = $('.episode_list li').length; /*error notif*/function err_ntf_load(){Notiflix.Notify.Failure('Error saat memuat chapter. Silahkan reload kembali');} /*Generate title*/$('.title-post-series').text($('h1.post-title').text()); /*Function Accordion*/ $(".acordeon").on("click", ".acordeon-cabecera", function() { $(this).toggleClass("active").next().slideToggle();}); /*Asc-desc click funtion*/ function Ascending_sort(a, b) { return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1; } function Descending_sort(a, b) { return ($(b).text().toUpperCase()) > ($(a).text().toUpperCase()) ? 1 : -1; } function asc_dsc_v1 (a){ var b = a ? Ascending_sort : Descending_sort; $('.acordeon .accor-div').sort(b).appendTo('.acordeon'); $( "ul.episode_list" ).each(function( index ) { $('.list-'+parseInt(index+1)+' li').sort(b).appendTo('.list-'+parseInt(index+1)); }); $( ".acordeon-cabecera" ).each(function() { $(this).removeClass('active'); }); $( ".acordeon-contenido" ).each(function() { $(this).css('display','none'); }); active_accor_first_el(); } function active_accor_first_el(){ /*Active First Element accrodion*/ $('.acordeon-cabecera:first').addClass('active'); $('.acordeon-contenido:first').slideDown(); } var asc_el = $('.sort-asc-list1'); var desc_el = $('.sort-decs-list1'); asc_el.on('click', function() { asc_dsc_v1(true); asc_el.addClass('hidden'); desc_el.removeClass('hidden'); }); desc_el.on('click', function() { asc_dsc_v1(false); desc_el.addClass('hidden'); asc_el.removeClass('hidden'); }); /*Select tab to parameter url*/ const urlParams = new URLSearchParams(window.location.search); const myParam = urlParams.get('tab'); var epi = 'episode'; var info = 'info'; if (myParam === epi) { $('#' + epi).attr('checked', ''); $('#' + info).removeAttr('checked'); } else if (myParam === info) { $('#' + info).attr('checked', ''); $('#' + epi).removeAttr('checked'); }; /*Click tab change parameter*/ function tab_click(a, b) { var href = new URL(window.location.href); href.searchParams.set(a, b); window.history.pushState(null, null, href.toString()); } $('.tab_info').on('click', function () { tab_click('tab', info); }); $('.tab_episode').on('click', function () { tab_click('tab', epi); }); /*Set beginning*/ setTimeout(function(){ $('.text-number-box-head.like-box-bot').addClass('like-box-bot1'); $('.text-number-box-head.like-box-bot').removeClass('like-box-bot'); $('.text-number-box-head.like-box-bot1').text($('.TextUpIcon1.jumlahtotalLikes').attr('data-text')); }, 5000); $('.bot-link-label1').attr('href',$('.link-bot-label1').attr('href')); /*Full data JSON*/ var items_list = [] $.getJSON(url_json_label, function(data) { $('.last_update1').append('<amp-timeago class="content12" height="16" datetime="'+data.items[0].updated+'" locale="id-ID">'+data.items[0].updated+'</amp-timeago>'); /*get count post*/var data_count_set=$('.count_post_scrset').attr('data-text');var datas = []; $.each( data.items, function( i, item ) { datas.push(item.published); });$('span.chapter_count, .all_chapters_count_series').text(datas.length + parseInt(data_count_set) + " Chapters"); $.each(data.items, function (index, orders) { items_list.push('<div class="one-id-blog-label">' + orders.id + '</div>'); }); $('<div>', { "class": 'loaded123 hidden', html: items_list.join('') }).appendTo(".daftar-id-blog-label"); var pool = []; $('.one-id-blog-label').each(function () { pool.push($(this).text()); }); $(document).ready(function () { /*fetch*/ $(function () { var all_count_like = []; $.each(pool, function (index, id_blog) { var abw = []; var dCounters = ''; var dDatabase = firebase.database().ref('Like-Counter-Whiz-id').child(pool[index]); /* get firebase data*/ dDatabase.on('value', function (snap) { var data = snap.val() || 0; abw.pop(); abw.push(data); all_count_like.push(abw); $('.daftar-count-like-all-label').append('<div class="number-like">' + abw + '</div>'); /*sum*/ var sum = 0; $('.number-like').each(function () { sum += parseFloat($(this).text()); }); $('.jumlahtotalLike').attr('data-text',sum);var count_all_likes_1= intToString($('.jumlahtotalLike').attr('data-text')); $('.jumlahtotalLikes').attr('data-text',count_all_likes_1); $('#count_all_likes1').text($('.jumlahtotalLike').attr('data-text'))}); }); var all_count_view = []; $.each(pool, function (index, id_blog) { var abw = []; var dCounters = ''; var dDatabase = firebase.database().ref('View-Counter-Whiz ID').child(pool[index]); /* get firebase data*/ dDatabase.on('value', function (snap) { var data = snap.val() || 0; abw.pop(); abw.push(data); all_count_view.push(abw); $('.daftar-count-view-all-label').append('<div class="number-view">' + abw + '</div>'); /*sum*/ var sum = 0; $('.number-view').each(function () { sum += parseFloat($(this).text()); }); $('.jumlahtotalview').text(sum);$('#visits').text(new Intl.NumberFormat('de-DE').format($('.jumlahtotalview').text())+' '); }); }); /*fetch*/ $(function () { var dCounters = $('.number-like-id-now'); [].forEach.call(dCounters, function (dCounter) { var cId = $('#ViewLink1').text(); var dDatabase = firebase.database().ref('Like-Counter-Whiz-id').child(cId); /* get firebase data*/ dDatabase.on('value', function (snap) { var data = snap.val() || 0; $('.number-like-id-now').text(data); ChangeNmbrLike() }); }); }); }); $(function () { var dDatabaseclick = firebase.database().ref('Like-Counter-Whiz-id').child($('#ViewLink1').text()); /* get firebase data*/ dDatabaseclick.on('value', function (snap) { }); }); /*untuk dihapus*/ function intToString(num) { if (num < 1000) { return num; } var si = [{ v: 1E3, s: "K" }, { v: 1E6, s: "M" }, { v: 1E9, s: "B" }, { v: 1E12, s: "T" }, { v: 1E15, s: "P" }, { v: 1E18, s: "E" }]; var i; for (i = si.length - 1; i > 0; i--) { if (num >= si[i].v) { break; } } return (num / si[i].v).toFixed(2).replace(/\.0+$|(\.[0-9]*[1-9])0+$/, "$1") + si[i].s; }; function ChangeNmbrLike() { var number_likeCvrt = $('.CountLikeTxt').attr('data-text'); var result_nmbr_cvrt = intToString(number_likeCvrt); $('.CountLikeTxt').attr('data-text', result_nmbr_cvrt); }; function doBounce(element, times, distance, speed) { for (i = 0; i < times; i++) { element.animate({ marginTop: '-=' + distance }, speed).animate({ marginTop: '+=' + distance }, speed); }; }; }); }); /*function for get data from json*/ function getDatasChapter(url,selector){ $.getJSON(url, function(data) { $.each( data.items, function( i, item ) { $(selector).append('<li><a href="'+item.url+'" class="arrow"><svg class="svg-openbook" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><use xlink:href="#openbook"/></svg><span>'+item.title+'</span><p class="update"><svg class="time-update-post" viewBox="0 0 512.18 512.18"><use xlink:href="#timetipe1"/></svg> <amp-timeago class="content12" height="12" datetime="'+item.updated+'" locale="id-ID">'+item.updated+'</amp-timeago></p></a> </li>'); /*Limit result JSON // if ( i === 3 ) {return false;}*/ }); $('ul.episode_list li a').each(function() {/*Delete text*/ var text_del = $('.text-del-list').attr('data-text'); var regexp = new RegExp(text_del, "gi"); $(this).html($(this).html().replace(regexp,''));}); }) .always(function() {Notiflix.Block.Remove('.'+$(selector).parent().get(0).className.replace(/ /g,'.')); }).fail(function() {err_ntf_load(); }); } /*Click loading*/ if(url_json_ch.length >0){ $.each(url_json_ch, function(index){ Notiflix.Block.Circle('.acordeon-contenido.v'+parseInt(index + 1)); $( ".acordeon-cabecera[data-sort='"+parseInt(index + 1)+"']" ).one( "click", function() { if(url_json_ch.length > 1){ var a = '.acordeon-contenido.v'+parseInt(index + 1); Notiflix.Block.Circle(a); Notiflix.Block.Remove(a,1000); } }); }); } $('div.breadcrumbs').css('display', 'none'); if($(window).width() >= 768) { $('#offnav-menu').attr('checked', 'checked'); } $(document).ready(function(){ /*Aktifkan accordion*/active_accor_first_el(); setTimeout(function(){/*load JSON click once*/ $.each(url_json_ch, function(index,data){ getDatasChapter(data,'ul.list-'+parseInt(index+1));}, 2000); }); }); $(document).ready(function(){ /*change Continue Reading and nav bot*/ $('.LinkChapter1Text').before('<div class="BotNavigation" id="bot-new-seriesv2"><div class="IconUpText1 CountLikeAll jumlahtotalLike" id="CountLk"><a aria-label="Blank" class="TextUpIcon1 jumlahtotalLikes" data-text=".."><svg enable-background="new 0 0 24 24" height="512" viewBox="-1 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><path class="SvgnoFill" d="m11.466 22.776c.141.144.333.224.534.224s.393-.08.534-.224l9.594-9.721c4.001-4.053 1.158-11.055-4.532-11.055-3.417 0-4.985 2.511-5.596 2.98-.614-.471-2.172-2.98-5.596-2.98-5.672 0-8.55 6.984-4.531 11.055z" fill="#f44336" stroke="#f44336" stroke-width="0"></path></svg></a></div><span class="comment-margin1"><amp-social-share aria-label="Share"class="nav-mobile-amp ampsharecustom ampsharembl i-amphtml-element i-amphtml-layout-fixed i-amphtml-layout-size-defined amp-social-share-system i-amphtml-built i-amphtml-layout"height="18" type="system" width="18" i-amphtml-layout="fixed" style="width: 18px; height: 18px;" role="button"tabindex="0" data-param-text="" data-param-url="'+window.location.href+'"></amp-social-share></span><a class="button linkChapter1"><svg enable-background="new 0 0 488.85 488.85" version="1.1" viewBox="0 0 488.85 488.85" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m244.42 98.725c-93.4 0-178.1 51.1-240.6 134.1-5.1 6.8-5.1 16.3 0 23.1 62.5 83.1 147.2 134.2 240.6 134.2s178.1-51.1 240.6-134.1c5.1-6.8 5.1-16.3 0-23.1-62.5-83.1-147.2-134.2-240.6-134.2zm6.7 248.3c-62 3.9-113.2-47.2-109.3-109.3 3.2-51.2 44.7-92.7 95.9-95.9 62-3.9 113.2 47.2 109.3 109.3-3.3 51.1-44.8 92.6-95.9 95.9zm-3.1-47.4c-33.4 2.1-61-25.4-58.8-58.8 1.7-27.6 24.1-49.9 51.7-51.7 33.4-2.1 61 25.4 58.8 58.8-1.8 27.7-24.2 50-51.7 51.7z"></path></svg> <span>Mulai Membaca</span></a></div>'); $('.linkChapter1').attr('href',$('.LinkChapter1Text').text()); $('#HTML00>ul.navMobile').removeAttr('amp-fx'); }); if($(window).width() <= 800) { $('header').removeAttr('amp-fx'); var myScrollFunc = function () { var myID = $('#bot-new-seriesv2'); if (window.scrollY >= window.innerHeight) { myID.css('bottom','0') } else { myID.css('bottom','-100px') } }; window.addEventListener("scroll", myScrollFunc); } /*Select box*/ $(".custom-select").each(function (index) { var classes = $(this).attr("class"), id = $(this).attr("id"), name = $(this).attr("name"); var template = '<div class="' + classes + '">'; template += '<span class="custom-select-trigger text' + index + '">' + $(this).attr("placeholder") + "</span>"; template += '<div class="custom-options">'; $(this) .find("option") .each(function () { template += '<span class="custom-option ' + $(this).attr("class") + '" data-value="' + $(this).attr("value") + '">' + $(this).html() + "</span>"; }); template += "</div></div>"; $(this).wrap('<div class="custom-select-wrapper"></div>'); $(this).hide(); $(this).after(template); }); $(".custom-option:first-of-type").hover( function () { $(this) .parents(".custom-options") .addClass("option-hover"); }, function () { $(this) .parents(".custom-options") .removeClass("option-hover"); } ); $(".custom-select-trigger").on("click", function () { $("html").one("click", function () { $(".custom-select").removeClass("opened"); }); $(this) .parents(".custom-select") .toggleClass("opened"); event.stopPropagation(); }); $(".custom-option").on("click", function () { $(this) .parents(".custom-select-wrapper") .find("select") .val($(this).data("value")); $(this) .parents(".custom-options") .find(".custom-option") .removeClass("selection"); $(this).addClass("selection"); $(this) .parents(".custom-select") .removeClass("opened"); $(this) .parents(".custom-select") .find(".custom-select-trigger") .text($(this).text()); }); var data_title_bookmark = $('.bookmark-text span.title-bookmark').text(); var data_img_bookmark = $('.bookmarks-img .image_in_bokmark').attr('src'); var data_url_now_current = location.protocol + '//' + location.host + location.pathname; var unique_id_text = $('.info_series_bookmark .unique_id_bookmark').attr('data-text'); var $addbtn = '.bookmark-btn-.bookmark-btn-add'; var $removebtn = '.bookmark-btn-.bookmark-btn-rmv'; var $updatebtn = '.bookmark-btn-.bookmark-btn-upd'; var data_bookmark_local = localStorage.getItem('data_bookmarks'); if (data_bookmark_local === null) { var default_local_bookmark = { "items": { "Favorit": [], "Sedang_dibaca": [], "Ingin_dibaca": [], "Belum_dibaca": [], "Drop": [], } }; data_bookmark_local = default_local_bookmark; } else { data_bookmark_local = JSON.parse(data_bookmark_local); $.each(data_bookmark_local.items, function (key1) { $.each(data_bookmark_local.items[key1], function (key2) { $.each(data_bookmark_local.items[key1][key2], function (key3) { if (data_bookmark_local.items[key1][key2][key3].id === unique_id_text) { var name_tagsub1 = key1.replace(/_/g, ' ');$('.custom-select-trigger.text0').text(name_tagsub1); $($addbtn).hide(); $($removebtn).show(); $($updatebtn).show(); return false; } }); }); }); } /*add bookmark*/ function add_bookmark_btn1() { /*check array maks 20*/ var chk_limit_array = false; var limit_tabs_bookmark = 20; $.each(data_bookmark_local.items, function (a, b) { if (b.length > limit_tabs_bookmark) { chk_limit_array = true; } }); if (chk_limit_array === true) { Notiflix.Notify.Warning('Kamu sudah mencapai batas maksimal bookmark'); } else { /*get status read*/ var status_position_bookmark = $('.custom-select-trigger.text0').text(); var status_bookmark = status_position_bookmark.replace(/\s/g, '_'); /*get sinopsis*/ var sinopsis_bookmark = $('#details_sinopsis').text(); var short_sinopsis = sinopsis_bookmark.substring(0, 175) + '...'; /*array new series*/ var data_add_new_sereis = { [unique_id_text]: { "id": unique_id_text, "title": data_title_bookmark, "url_img": data_img_bookmark, "url": data_url_now_current, "sinopsis": short_sinopsis, "last_chapter_url": "", "last_chapter_id": "", } } data_bookmark_local.items[status_bookmark].unshift(data_add_new_sereis); } } function remove_bookmark_btn1() { $.each(data_bookmark_local.items, function (key1) { $.each(data_bookmark_local.items[key1], function (key2) { $.each(data_bookmark_local.items[key1][key2], function (key3) { if (data_bookmark_local.items[key1][key2][key3].id === unique_id_text) { data_bookmark_local.items[key1].splice(key2, 1); return false; } }); }); }); } $($addbtn).click(function () { add_bookmark_btn1(); Notiflix.Block.Circle('.box-modal-library'); setTimeout(function () { Notiflix.Block.Remove('.box-modal-library'); Notiflix.Notify.Success('"' + data_title_bookmark + '" Bookmarked'); $($addbtn).hide(); $($removebtn).show(); $($updatebtn).show(); } , 1000); console.log('item added', data_bookmark_local); }); /*Remove button bookmark*/ $($removebtn).click(function () { remove_bookmark_btn1(); Notiflix.Block.Circle('.box-modal-library'); setTimeout(function () { Notiflix.Block.Remove('.box-modal-library'); Notiflix.Notify.Failure('"' + data_title_bookmark + '" Removed'); $($addbtn).show(); $($removebtn).hide(); $($updatebtn).hide(); } , 1000); console.log('item removed', data_bookmark_local) }); /*Update*/ $($updatebtn).click(function () { remove_bookmark_btn1(); add_bookmark_btn1(); setTimeout(function () { Notiflix.Block.Remove('.box-modal-library'); Notiflix.Notify.Info('"' + data_title_bookmark + '" Updated'); } , 1000); console.log('updated', data_bookmark_local); }); /*Add JSON to localstorage*/ $(window).on('beforeunload', function () { localStorage.setItem('data_bookmarks',JSON.stringify(data_bookmark_local)); }); /*get fragment url*/ $('.follow_btn').click(function () { window.location.hash = '#bookmark'; }); $(function () { if (window.location.hash === '#bookmark') { $('.follow_btn.cursor131').trigger('click'); } });